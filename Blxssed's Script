local Library = loadstring(game:HttpGetAsync("https://github.com/ActualMasterOogway/Fluent-Renewed/releases/latest/download/Fluent.luau"))()
local SaveManager = loadstring(game:HttpGetAsync("https://raw.githubusercontent.com/ActualMasterOogway/Fluent-Renewed/master/Addons/SaveManager.luau"))()
local InterfaceManager = loadstring(game:HttpGetAsync("https://raw.githubusercontent.com/ActualMasterOogway/Fluent-Renewed/master/Addons/InterfaceManager.luau"))()

local GUI = game:GetService("CoreGui"):FindFirstChild("OpenClose")
	if GUI then 
		GUI:Destroy()
	end

	local GUI1 = game:GetService("CoreGui"):FindFirstChild("Speed_Hub_X_ScreenGui")
	if GUI1 then 
		GUI1:Destroy()
	end
end

local function CloseOpen()
	local UIStroke = Instance.new("UIStroke")
	local UICorner = Instance.new("UICorner")

	local ScreenGui = Instance.new("ScreenGui")
	local Close_ImageButton = Instance.new("ImageButton")

	do
		ProtectGui(ScreenGui)
	end

	ScreenGui.Name = "OpenClose"
	ScreenGui.Parent = RunService:IsStudio() and LocalPlayer.PlayerGui or (gethui() or cloneref(game:GetService("CoreGui")) or game:GetService("CoreGui"))
	ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

	Close_ImageButton.Parent = ScreenGui
	Close_ImageButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	Close_ImageButton.BorderColor3 = Color3.fromRGB(255, 0, 0)
	Close_ImageButton.Position = UDim2.new(0.1021, 0, 0.0743, 0)
	Close_ImageButton.Size = UDim2.new(0, 59, 0, 49)
	Close_ImageButton.Image = "rbxassetid://82140212012109"
	Close_ImageButton.Visible = false

	UICorner.Name = "MainCorner"
	UICorner.CornerRadius = UDim.new(0, 9)
	UICorner.Parent = Close_ImageButton

	local dragging = false
	local dragStart = nil
	local startPos = nil

	local function update(input)
		local delta = input.Position - dragStart
		Close_ImageButton.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
	end

	Close_ImageButton.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			dragStart = input.Position
			startPos = Close_ImageButton.Position

			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragging = false
				end
			end)
		end
	end)

	Close_ImageButton.InputChanged:Connect(function(input)
		if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
			update(input)
		end
	end)

	return Close_ImageButton
end

local Close_ImageButton = CloseOpen()

local Window = Library:CreateWindow{
    Title = "Private Script | By Encrypted " .. Library.Version,
    SubTitle = "by Encrypted",
    TabWidth = 160,
    Size = UDim2.fromOffset(830, 525),
    Resize = true, -- Resize this ^ Size according to a 1920x1080 screen, good for mobile users but may look weird on some devices
    MinSize = Vector2.new(470, 380),
    Acrylic = true, -- The blur may be detectable, setting this to false disables blur entirely
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.RightControl -- Used when there's no MinimizeKeybind
}

-- Tabs
local Tabs = {
    Home = Window:CreateTab{
        Title = "Home",
        Icon = "phosphor-house-bold"
    },
    OpFarming = Window:CreateTab{
        Title = "Op Farming",
        Icon = "phosphor-rocket-bold"
    },
    Settings = Window:CreateTab{
        Title = "Settings",
        Icon = "settings"
    }
}

-- Home Tab Content
Tabs.Home:CreateParagraph("Welcome", {
    Title = "Welcome",
    Content = "Discord Server: "
})

Tabs.Home:CreateButton{
    Title = "Copy Discord Server Link",
    Description = "",
    Callback = function()
        setclipboard("https://discord.gg/TVqdwWur") -- Copies the link to clipboard
    end
}

Tabs.Home:CreateParagraph("Local Player", {
    Title = "Local Player",
    Content = ":"
})

-- SpeedPower Slider
local SpeedPower = Tabs.Home:CreateSlider("SpeedPower", {
    Title = "SpeedPower",
    Default = 16,
    Min = 0,
    Max = 200,
    Rounding = 0,
    Callback = function(Value)
        game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = Value
    end
})

SpeedPower:OnChanged(function(Value)
    game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = Value
end)

SpeedPower:SetValue(16)

-- JumpPower Slider
local JumpPower = Tabs.Home:CreateSlider("JumpPower", {
    Title = "JumpPower",
    Default = 50,
    Min = 0,
    Max = 300,
    Rounding = 0,
    Callback = function(Value)
        game.Players.LocalPlayer.Character.Humanoid.JumpPower = Value
    end
})

JumpPower:OnChanged(function(Value)
    game.Players.LocalPlayer.Character.Humanoid.JumpPower = Value
end)

JumpPower:SetValue(50)

-- Size Slider
local Size = Tabs.Home:CreateSlider("Size", {
    Title = "Size",
    Default = 1,
    Min = 1,
    Max = 100,
    Rounding = 1,
    Callback = function(Value)
        game.Players.LocalPlayer.Character.HumanoidRootPart.Size = Vector3.new(Value, Value, Value)
    end
})

Size:OnChanged(function(Value)
    game.Players.LocalPlayer.Character.HumanoidRootPart.Size = Vector3.new(Value, Value, Value)
end)

Size:SetValue(1)

-- Op Farming Tab Content
Tabs.OpFarming:CreateParagraph("Op Farming Tab", {
    Title = "Op Farming Tab",
    Content = "Hello, in this tab there are many OP functions, make sure to read the description of each toggle to know what to do."
})

-- OP Auto Farm Toggle
local OP_AutoFarm = Tabs.OpFarming:CreateToggle("OP_AutoFarm", {
    Title = "OP Auto Farm",
    Description = "Equip Swift Samurai Before using",
    Default = false,
    Callback = function(State)
        getgenv().autoFarmPlus = State
        if not getgenv().autoFarmPlus then return end

        task.spawn(function()
            for i = 1, 2 do
                task.spawn(function()
                    for j = 1, 4 do
                        task.spawn(function()
                            for k = 1, 200 do
                                task.spawn(function()
                                    while getgenv().autoFarmPlus do
                                        game:GetService("Players").LocalPlayer:WaitForChild("muscleEvent"):FireServer("rep")
                                        task.wait(0.01)
                                    end
                                end)
                            end
                        end)
                    end
                end)
            end
        end)
    end
})

-- OP Pack Farming Rebirth Toggle
local OP_PackFarmingRebirth = Tabs.OpFarming:CreateToggle("PackFarmingRebirth", {
    Title = "Pack Farming Rebirth",
    Description = "Auto Rebirth With Packs",
    Default = false,
    Callback = function(State)
        getgenv().PackFarmingRebirth = State
        if not getgenv().PackFarmingRebirth then return end

        task.spawn(function()
            while getgenv().PackFarmingRebirth do
                local player = game:GetService("Players").LocalPlayer
                local petEvent = game:GetService("ReplicatedStorage").rEvents.equipPetEvent
                local rebirthEvent = game:GetService("ReplicatedStorage"):WaitForChild("rEvents"):WaitForChild("rebirthRemote")

                local function equipPets(petName)
                    local equipped = 0
                    for _, pet in pairs(player.petsFolder.Unique:GetChildren()) do
                        if pet.Name == petName and equipped < 8 then
                            task.spawn(function()
                                petEvent:FireServer("equipPet", pet)
                            end)
                            equipped = equipped + 1
                            task.wait(0.01)
                        end
                    end
                end

                local function unequipPets(petName)
                    local unequipped = 0
                    for _, pet in pairs(player.petsFolder.Unique:GetChildren()) do
                        if pet.Name == petName and unequipped < 8 then
                            task.spawn(function()
                                petEvent:FireServer("unequipPet", pet)
                            end)
                            unequipped = unequipped + 1
                            task.wait(0.01)
                        end
                    end
                end

                -- Equip 8 different Swift Samurai pets
                equipPets("Swift Samurai")

                -- Wait 2 seconds
                task.wait(2)

                -- Unequip 8 different Swift Samurai pets
                unequipPets("Swift Samurai")

                -- Equip 8 different Tribal Overlord pets
                equipPets("Tribal Overlord")

                -- Wait 5 seconds
                task.wait(5)

                -- Perform rebirth
                local args = {} -- Add correct args if needed
                rebirthEvent:InvokeServer(unpack(args))

                -- Immediately equip 8 different Swift Samurai pets again
                equipPets("Swift Samurai")
            end
        end)
    end
})

-- Hide Frame Toggle (Settings Tab)
local HideFrameToggle = Tabs.Settings:CreateToggle("HideFrame", {
    Title = "Hide Frame",
    Description = "Hide Strength, Durability, and Agility Frame",
    Default = false,
    Callback = function(State)
        for _, frameName in ipairs({"strengthFrame", "durabilityFrame", "agilityFrame"}) do
            local frame = game:GetService("Players").LocalPlayer.PlayerGui:FindFirstChild(frameName)
            if frame then
                frame.Visible = not State
            end
        end
    end
})
